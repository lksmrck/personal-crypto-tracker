"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[462],{1776:function(n,e,t){t.d(e,{J2:function(){return s},J9:function(){return i},a$:function(){return d},dT:function(){return l},mC:function(){return u},pH:function(){return p},s5:function(){return o},u$:function(){return c}});var r=t(4569),a=t.n(r)().create({baseURL:"https://mycryptotrackerapp.herokuapp.com"}),o=function(n){return a.get("/holdings",{params:{userId:n}})},i=function(n){return a.post("/holdings",n)},s=function(n,e){return a.patch("/holdings".concat("/",n),e)},c=function(n){return a.post("/holdings".concat("/delete"),n)},u=function(n){return a.get("/transactions",{params:{userId:n}})},l=function(n){return a.post("/transactions",n)},d=function(n){return a.post("/register",n)},p=function(n){return a.post("/login",n)}},462:function(n,e,t){t.r(e),t.d(e,{default:function(){return sn}});var r,a,o,i,s,c,u,l=t(885),d=t(168),p=t(8789),h=t(3066),f=p.ZP.div(r||(r=(0,d.Z)(["\n  .positive-change {\n    ","\n    font-size: 15px;\n    font-weight: bold;\n  }\n  .negative-change {\n    ","\n    font-size: 15px;\n    font-weight: bold;\n  }\n\n  .titles-container {\n    margin-top: 3%;\n    margin-left: 15%;\n  }\n  .data-container {\n    text-align: right;\n    margin-top: 3%;\n    margin-right: 15%;\n  }\n  .card-paper {\n    ","\n    font-size: 14px\n  }\n  .card-header-container {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    height: 100px;\n  }\n\n  .card-header-logo-name-container {\n    ","\n    margin: 4%;\n    h2 {\n      margin-left: 6%;\n    }\n  }\n  .card-header-price-container {\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    margin-right: 4%;\n  }\n  .price {\n    font-size: 20px;\n  }\n  .card-buttons-container {\n    ","\n  }\n  .PL {\n    font-size: 15px;\n    font-weight: bold;\n  }\n"])),h.lO,h.vj,h.rS.boxShadow,h.ie,h.ie),m=p.ZP.div(a||(a=(0,d.Z)(["\n  margin-top: 2%;\n  width: 100%;\n"]))),x=p.ZP.div(o||(o=(0,d.Z)(["\n  display: flex;\n  justify-content: center;\n\n  .no-holdings-found {\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    margin-top: 10%;\n    button {\n      margin: 2%;\n    }\n    @media only screen and (max-width: 615px) {\n      h1 {\n        font-size: 18px;\n      }\n    }\n  }\n"]))),g=t(3936),v=t(2791),y=t(7946),j=t(1891),Z=t(4165),b=t(5861),w=t(1004),C=t(1776),T=t(8515),S=t(7692),k=t(1614),N=t(1889),D=t(703),P=t(3400),I=t(5748),L=t(5635),A=t(184),B=function(){var n=(0,v.useContext)(T.Z).dashboardData,e=(0,v.useContext)(y.Z),t=e.setFormShown,r=e.setSelectedCrypto,a=e.setTransactionType,o=(0,g.C)((function(n){return n.holdings}));return(0,A.jsx)(k.Z,{children:(0,A.jsx)(f,{children:(0,A.jsx)(N.ZP,{container:!0,spacing:2.5,children:o.map((function(e){var o=n.find((function(n){return n.name.toLowerCase()===e.name.toLowerCase()})),i=e.amount*(null===o||void 0===o?void 0:o.current_price)-e.amount*e.price,s=i/(e.amount*e.price),c=new Date(null===o||void 0===o?void 0:o.last_updated),u=new Date(e.date);return(0,A.jsx)(N.ZP,{item:!0,xs:12,sm:12,md:6,lg:4,children:(0,A.jsxs)(D.Z,{className:"card-paper",children:[(0,A.jsxs)("div",{className:"card-header-container",children:[(0,A.jsxs)("div",{className:"card-header-logo-name-container",children:[(0,A.jsx)("img",{src:null===o||void 0===o?void 0:o.imageURL,alt:"icon",width:"40px",height:"40px"}),(0,A.jsx)("h2",{children:e.name})]}),(0,A.jsx)("div",{className:"card-header-price-container",children:(0,A.jsx)("h5",{className:"price",children:(0,I.S)(null===o||void 0===o?void 0:o.current_price,"usd")})})]}),(0,A.jsxs)(N.ZP,{container:!0,children:[(0,A.jsx)(N.ZP,{item:!0,xs:6,sm:6,md:6,children:(0,A.jsxs)("div",{className:"titles-container",children:[(0,A.jsx)("p",{children:"Average purch. price:"}),(0,A.jsx)("p",{children:"Holding amount:"}),(0,A.jsx)("p",{children:"Total purchase price:"}),(0,A.jsx)("p",{className:"PL",children:"Total P/L USD:"}),(0,A.jsx)("p",{className:"PL",children:"Total P/L %:"}),(0,A.jsx)("hr",{}),(0,A.jsx)("p",{children:"Last transaction:"}),(0,A.jsx)("p",{children:"Last updated:"})]})}),(0,A.jsx)(N.ZP,{item:!0,xs:6,sm:6,md:6,children:(0,A.jsxs)("div",{className:"data-container",children:[(0,A.jsx)("p",{children:(0,I.S)(e.price,"usd")}),(0,A.jsx)("p",{children:e.amount}),(0,A.jsx)("p",{children:(0,I.S)(e.amount*e.price,"usd")}),(0,A.jsx)("p",{className:i>0?"positive-change":"negative-change",children:(0,I.S)(i,"usd")}),(0,A.jsx)("p",{className:i>0?"positive-change":"negative-change",children:"".concat(s.toFixed(2),"%")}),(0,A.jsx)("hr",{}),(0,A.jsx)("p",{children:(0,L.p)(u)}),(0,A.jsx)("p",{children:c.toLocaleTimeString()})]})})]}),(0,A.jsxs)("div",{className:"card-buttons-container",children:[(0,A.jsx)(P.Z,{onClick:function(){t(!0),r(e.name),a("buy")},children:(0,A.jsx)(S.RWX,{style:{color:"green",width:"45px",height:"45px"}})}),(0,A.jsx)(P.Z,{onClick:function(){t(!0),r(e.name),a("sell")},children:(0,A.jsx)(S.GTT,{style:{color:"red",width:"45px",height:"45px"}})})]})]})},e.name)}))})})})},M=t(961),F=t(6971),z=function(){var n=(0,g.C)((function(n){return n.holdings})),e=(0,g.C)((function(n){return n.errorAndLoading})),t=(0,g.T)(),r=(0,v.useContext)(y.Z),a=r.setFormShown,o=r.setSelectedCrypto,i=r.setTransactionType,s=r.formShown,c=(0,v.useContext)(T.Z).getDashboardData,u=(0,j.H)();return(0,v.useEffect)((function(){c(),t(function(n){return function(){var e=(0,b.Z)((0,Z.Z)().mark((function e(t){var r,a,o,i;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:w.s5}),e.next=4,C.s5(n);case 4:r=e.sent,a=r.data,t({type:w.$1,payload:a}),a&&setTimeout((function(){t({type:w.hD})}),100),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:w.hD}),i=e.t0.response&&null!==(o=e.t0.response.data)&&void 0!==o&&o.message?e.t0.response.data.message:e.t0.message,t({type:w.Go,payload:i});case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}()}(u))}),[]),(0,A.jsx)("div",{children:(0,A.jsx)(m,{children:e.loading?(0,A.jsx)(M.Z,{}):n.length>0?(0,A.jsx)(B,{}):s&&(0,A.jsx)(x,{children:(0,A.jsxs)("div",{className:"no-holdings-found",children:[(0,A.jsx)("h1",{children:"No holdings found. Please add one."}),(0,A.jsx)(F.Z,{text:"Add transaction",onClick:function(){a(!0),o("Bitcoin"),i("buy")},variant:"contained",purple:!0})]})})})})},E=p.ZP.div(i||(i=(0,d.Z)(["\n  .button-container {\n    margin-top: 2%;\n    ","\n  }\n  .select-crypto {\n    min-width: 200px;\n  }\n"])),h.ie),G=p.ZP.form(s||(s=(0,d.Z)(["\n  display: flex;\n  justify-content: center;\n  height: 550px;\n\n  .form {\n    margin-top: 2%;\n    width: 450px;\n    height: 400px;\n    border-radius: ",";\n    ",";\n    ",";\n    background-color: white;\n    button {\n      margin: 2%;\n      margin-top: 4%;\n    }\n  }\n  .form-data-container {\n    width: 100%;\n\n    ",";\n    flex-direction: column;\n  }\n  .buttons-container {\n    width: 100%;\n    ","\n  }\n\n  .display {\n    color: red;\n    font-size: 13px;\n  }\n  .hide {\n    display: none;\n  }\n"])),h.rS.borderRadius,h.rS.boxShadow,h.ie,h.ie,h.ie),H=p.ZP.span(c||(c=(0,d.Z)(["\n  margin-left: 10px;\n"]))),R=p.ZP.div(u||(u=(0,d.Z)(["\n  width: 100%;\n  .select-transaction-type {\n    display: flex;\n    justify-content: center;\n    width: 100%;\n  }\n  .select-transaction-type > * {\n    width: 100px;\n  }\n"]))),_=t(4942),$=t(1413),J=t(7391),U=t(3466),Y=function(n){var e=n.input,t=n.startAdornment,r=n.autoFocus,a=n.name;return(0,A.jsx)("div",{children:(0,A.jsx)(J.Z,{className:"inputs",label:e.id,variant:"standard",size:"small",inputProps:(0,$.Z)({},e),color:"primary",autoFocus:r,required:!0,margin:"dense",name:a,InputProps:{startAdornment:(0,A.jsx)(U.Z,{position:"start",children:t})},sx:{width:200,"& label.Mui-focused":{color:"#6c1c6a"},"& .MuiInput-underline:after":{borderBottomColor:"#6c1c6a"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"#6c1c6a"}}}})})},O=t(6362),q=t(4925),W=t(8406),X=t(9891),K=function(n){var e=(0,v.useContext)(T.Z).dashboardData,t=(0,v.useContext)(y.Z),r=t.transactionType,a=t.setTransactionType,o=(0,g.C)((function(n){return n.holdings}));(0,v.useEffect)((function(){a(r)}),[r]);return(0,A.jsx)("div",{children:(0,A.jsxs)(O.Z,{variant:"filled",size:"small",className:"select-crypto",children:[(0,A.jsx)(q.Z,{id:"crypto-select",sx:{"&.Mui-focused":{color:"#6c1c6a"}},children:"Select crypto:"}),(0,A.jsx)(W.Z,{labelId:"crypto-select",id:"crypto-select",label:"crypto-select",value:n.value,onChange:function(e){n.selected(e.target.value)},required:!0,variant:"filled",sx:{"&:before":{borderColor:"#6c1c6a"},"&:after":{borderColor:"#6c1c6a"}},children:"buy"==r?null===e||void 0===e?void 0:e.map((function(n){return(0,A.jsxs)(X.Z,{value:n.name,sx:{display:"flex"},children:[(0,A.jsx)("img",{src:n.imageURL,height:"20px",width:"20px"}),(0,A.jsx)(H,{children:n.name})]},n.name)})):o.map((function(n){var t=null===e||void 0===e?void 0:e.find((function(e){return e.name===n.name}));return(0,A.jsxs)(X.Z,{value:n.name,sx:{display:"flex"},children:[(0,A.jsx)("img",{src:t.imageURL,height:"20px",width:"20px"}),(0,A.jsx)(H,{children:n.name})]},n.name)}))})]})})},Q=t(2889),V=t(388),nn=t(3238),en=function(n){var e=n.buySell,t=n.handleBuySellChange;return(0,A.jsx)(R,{children:(0,A.jsxs)(nn.Z,{value:e,exclusive:!0,onChange:t,className:"select-transaction-type",children:[(0,A.jsx)(V.Z,{value:"buy",sx:{"&.MuiToggleButton-root":{backgroundColor:"#f0f0f0",color:"#797979"},"&&.MuiToggleButton-root:hover":{backgroundColor:"#025E03",color:"white"},"&.Mui-selected":{backgroundColor:"#008001",color:"white"},"&.Mui-selected:hover":{backgroundColor:"red",color:"white"}},children:"Buy"}),(0,A.jsx)(V.Z,{value:"sell",sx:{"&.MuiToggleButton-root":{backgroundColor:"#f0f0f0",color:"#797979"},"&&.MuiToggleButton-root:hover":{backgroundColor:"#A40A0A",color:"white"},"&.Mui-selected":{backgroundColor:"#C80B0B",color:"white"}},children:"Sell"})]})})},tn=function(n,e){var t=n.price*n.amount;if("buy"===e.transactionType){var r=(t+e.price*e.amount)/(n.amount+e.amount);return(0,$.Z)((0,$.Z)({},e),{},{price:r,amount:n.amount+e.amount,date:e.date})}if("sell"===e.transactionType)return(0,$.Z)((0,$.Z)({},e),{},{price:n.price,amount:n.amount-e.amount,date:e.date})},rn=function(){var n=(0,j.H)(),e={transactionType:"buy",userId:n,name:"",price:"",amount:"",date:""},t=(0,v.useState)(e),r=(0,l.Z)(t,2),a=r[0],o=r[1],i=(0,v.useRef)(null),s=(0,v.useState)(),c=(0,l.Z)(s,2),u=c[0],d=c[1],p=(0,v.useState)(!0),h=(0,l.Z)(p,2),f=h[0],m=h[1],x=(0,g.T)(),S=(0,g.C)((function(n){return n.holdings})),k=(0,v.useContext)(T.Z).getDashboardData,N=(0,v.useContext)(y.Z),D=N.selectedCrypto,P=N.transactionType,I=N.setSelectedCrypto,L=N.setFormShown,B=N.setTransactionType;(0,v.useEffect)((function(){k(),o((0,$.Z)((0,$.Z)({},a),{},{userId:n}))}),[]),(0,v.useEffect)((function(){o((0,$.Z)((0,$.Z)({},a),{},{name:D,transactionType:P}));var n=S.find((function(n){return n.name===D}));d(n)}),[D,P]);var M=function(n){f||m(!0),o((0,$.Z)((0,$.Z)({},a),{},(0,_.Z)({},n.target.name,n.target.value)))};return(0,A.jsx)(G,{onSubmit:function(n){n.preventDefault();var e,t,r=S.find((function(n){return n.name===a.name}));if("sell"===a.transactionType&&r.amount>=parseInt(a.amount)||"buy"===a.transactionType){m(!0);var o=(0,$.Z)((0,$.Z)({},a),{},{price:parseInt(a.price),amount:parseInt(a.amount)});if(null!==i.current&&i.current.reset(),L(!1),void 0!==r){var s=tn(r,o);0!==s.amount?(console.log(s),x((e=o.name,t=s,function(){var n=(0,b.Z)((0,Z.Z)().mark((function n(r){var a,o,i,s;return(0,Z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:w.s5}),n.next=4,C.J2(e,t);case 4:a=n.sent,o=a.data,r({type:w.AW,payload:o}),o&&setTimeout((function(){r({type:w.hD})}),100),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(0),r({type:w.hD}),s=n.t0.response&&null!==(i=n.t0.response.data)&&void 0!==i&&i.message?n.t0.response.data.message:n.t0.message,r({type:w.Go,payload:s});case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()))):x(function(n){return function(){var e=(0,b.Z)((0,Z.Z)().mark((function e(t){var r,a,o,i;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:w.s5}),e.next=4,C.u$(n);case 4:r=e.sent,a=r.data,console.log(a),t({type:w.ui,payload:a}),a&&setTimeout((function(){t({type:w.hD})}),100),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:w.hD}),i=e.t0.response&&null!==(o=e.t0.response.data)&&void 0!==o&&o.message?e.t0.response.data.message:e.t0.message,t({type:w.Go,payload:i});case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n){return e.apply(this,arguments)}}()}({userId:a.userId,itemName:a.name}))}else x(function(n){return function(){var e=(0,b.Z)((0,Z.Z)().mark((function e(t){var r,a,o,i;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:w.s5}),e.next=4,C.J9(n);case 4:r=e.sent,a=r.data,t({type:w.G7,payload:a}),a&&setTimeout((function(){t({type:w.hD})}),100),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:w.hD}),i=e.t0.response&&null!==(o=e.t0.response.data)&&void 0!==o&&o.message?e.t0.response.data.message:e.t0.message,t({type:w.Go,payload:i});case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}()}(o));x((0,Q.d)(o))}m(!1)},ref:i,children:(0,A.jsx)("div",{className:"form",children:(0,A.jsxs)("div",{className:"form-data-container",children:[(0,A.jsx)(en,{buySell:a.transactionType,handleBuySellChange:function(n,e){null!==e&&B(e)}}),(0,A.jsx)(K,{selected:function(n){m(!0),I(n)},value:a.name}),(0,A.jsx)(Y,{input:{id:"Price per item",type:"number",min:.01,step:.01,onChange:M},startAdornment:"$",autoFocus:!0,name:"price"}),(0,A.jsx)(Y,{input:{id:"Amount",type:"number",min:1e-5,step:1e-5,onChange:M},name:"amount"}),(0,A.jsxs)("p",{className:f?"hide":"display",children:["You can't sell more than you hold. Your acutal holding of"," ",a.name," is ",null===u||void 0===u?void 0:u.amount,"."]}),(0,A.jsx)(Y,{input:{id:"Date of transaction",type:"date",onChange:M},name:"date"}),(0,A.jsxs)("div",{className:"buttons-container",children:[(0,A.jsx)(F.Z,{type:"submit",variant:"contained",text:"Add transaction",purple:!0}),(0,A.jsx)(F.Z,{variant:"contained",text:"Back",onClick:function(){return L(!1)},red:!0})]})]})})})},an=function(){var n=(0,v.useContext)(y.Z),e=n.formShown,t=n.setFormShown,r=n.setTransactionType,a=(0,g.C)((function(n){return n.holdings}));return(0,A.jsx)(E,{children:e?(0,A.jsx)(rn,{}):a.length>0&&(0,A.jsx)("div",{className:"button-container",children:(0,A.jsx)(F.Z,{variant:"contained",onClick:function(){t(!0),r("buy")},text:"Add transaction",purple:!0})})})},on=t(2578),sn=function(){var n=(0,v.useState)((0,j.H)()),e=(0,l.Z)(n,2),t=e[0],r=e[1];return(0,v.useEffect)((function(){r((0,j.H)())}),[]),(0,A.jsx)(A.Fragment,{children:t?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(an,{}),(0,A.jsx)(z,{})]}):(0,A.jsx)(on.Z,{})})}},2578:function(n,e,t){var r=t(8931),a=t(2783),o=t(6971),i=t(184);e.Z=function(){var n=(0,r.k6)();return(0,i.jsx)(a.$,{children:(0,i.jsxs)("div",{className:"container",children:[(0,i.jsx)("h1",{children:"You need to sign in to see this page."}),(0,i.jsx)(o.Z,{variant:"contained",onClick:function(){n.push("/auth")},text:"Sign In",purple:!0})]})})}},2889:function(n,e,t){t.d(e,{d:function(){return c},f:function(){return s}});var r=t(4165),a=t(5861),o=t(1004),i=t(1776),s=function(n){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a,s,c,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:o.s5}),e.next=4,i.mC(n);case 4:a=e.sent,s=a.data,t({type:o.bj,payload:s}),s&&setTimeout((function(){t({type:o.hD})}),100),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:o.hD}),u=e.t0.response&&null!==(c=e.t0.response.data)&&void 0!==c&&c.message?e.t0.response.data.message:e.t0.message,t({type:o.Go,payload:u});case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}()},c=function(n){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a,s,c,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.dT(n);case 3:a=e.sent,s=a.data,t({type:o.E0,payload:s}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),u=e.t0.response&&null!==(c=e.t0.response.data)&&void 0!==c&&c.message?e.t0.response.data.message:e.t0.message,t({type:o.Go,payload:u});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}()}},5635:function(n,e,t){function r(n){return n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()}t.d(e,{p:function(){return r}})},1891:function(n,e,t){t.d(e,{H:function(){return r}});var r=function(){var n,e=localStorage.getItem("profile");return null!==e&&((n=JSON.parse(e)).result._id?n.result._id:n.result.googleId)}},5748:function(n,e,t){t.d(e,{S:function(){return r},Y:function(){return a}});var r=function(n,e){return new Intl.NumberFormat("en-EN",{style:"currency",currency:e}).format(n)},a=function(n){var e=n.toString();return e.split(".")[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")+(e.split(".")[1]?".".concat(e.split(".")[1]):"").substring(0,8)}}}]);
//# sourceMappingURL=462.fbd9065e.chunk.js.map